---
title: "Homework_0"
author: "Oviya Mohan & Yue Zhang"
date: "7/19/2022"
output:
  html_document:
    df_print: paged
    toc: yes
  word_document:
    toc: no
  pdf_document:
    latex_engine: xelatex
    number_sections: no
    toc: no
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(warning = FALSE, message = FALSE) 
```


## Introduction 

The purpose of this homework is to set the stage for our stats course as well as get everyone familiar with R and using R Markdown. It will go over some basic concepts, that we have probably already come across often in most introductory statistics courses, and get a discussion going on our understanding and misconceptions about them. Also to get acquainted with the working style of interactive labs. If you have any questions, comments or suggestions - feel free to reach out to us. 


Please complete and submit this Rmd by emailing it to either yzh191@u.rochester.edu or omohan@ur.rochester.edu by 11:59 pm on Aug 21, 2022. <br>
You can submit just the Rmd but make sure it knits without errors before you do! You can also edit the author and date on top of this document. And make sure to read all the mandatory reading materials provided or Muffin and Pico will hunt you down. There are also a lot of extra resources scattered around, take some time to explore them and if you want to add to them - drop a message on slack and share them! 
There are conceptual questions you can answer along the way, as well as some code chunks for you to fill in. Feel free to try out extra visualizations and tests! 
Post any syntax or code related doubts on slack as soon as you encounter them so we can work on them together. You are also required to list some questions, of a more conceptual nature, at the end of this document - you will find more details about that below. 


```{r, include = FALSE}
# Installing and loading libraries 
library(tidyverse)
library(dplyr)
library(ggplot2)
library(car)
```

## Resources on R and Rmd
This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. 

RStudio Cloud has great [primers](https://rstudio.cloud/learn/primers) to help you get started with R if you are new to it. It is also recommended that you go through the Chapters 2-5 of the textbook to get more practice with data visualization and wrangling in R. These [cheatsheets](https://rstudio.cloud/learn/cheat-sheets) will also come in handy during out lab sessions as we familiarize ourselves with R. 


## Simulation and NHST
### Simulating Data <a name="data"></a>

```{r}
#nothing is ever truly random when "randomly" generated on a computer - always pseudo random
#set.seed(124) #can be used to get the same "random" sample consistently 
dog_mu = 20
dog_sigma = 5
dog_sample = rnorm(100,dog_mu,dog_sigma)
cat_mu = 15
cat_sigma = 2
cat_sample = rnorm(100,cat_mu,cat_sigma)

#random R tip #1: to view any variable, highlight it and Cmd+enter/Ctrl+enter 

```

### Performing Null Hypothesis Signifiance Testing (NHST) 
From now on, we will pretend that we do not know the true underlying population distribution. Read the following article on NHST: 
[Null Hypothesis Significance Testing: a short tutorial](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5635437/)

1. **Summarizing Data.** Insert two code chunks, 1) to visualize and 2) to calculate and fill out following table on the statistical summary of the simulated [sample data](#data)

```{r}
#visualizing data 
hist_dog <- hist(dog_sample,
main="Distribution of Dog Sizes",
xlab="Size",
col="blue",
alpha = 0.6, 
freq=FALSE,
breaks = 20
)
hist_cat <- hist(cat_sample,
main="Distribution of Cat Sizes",
xlab="Size",
col="orange",
alpha = 0.4, 
freq=FALSE,
breaks = 20
)

#in the same plot 
plot(hist_dog, xlim = c(5, 40), ylim = c(0,20), col = "blue", main = "Distribution of Dog and Cat Sizes", xlab = "Size") + plot(hist_cat, add = TRUE, col = "orange")
legend("topright", c("Dogs", "Cats"), col=c("blue", "Orange"), lwd=5)

#try other ways to visualize the data here 

```

```{r}
#summarizing our data  
dog_mean <- mean(dog_sample)
dog_sd <- sd(dog_sample)

cat_mean <- mean(cat_sample)
cat_sd <- sd(cat_sample)
```
    ||Mean|Standard Deviation|
    |:---:|:---:|:---:|
    | Dog |<\br>|<\br>|
    | Cat |<\br>|<\br>|

2. **Listing Hypotheses.** We would like to compare the size of dogs with the size of cats. List out the hypotheses: 
    * Null Hypothesis: <\br>
    * Alternate Hypothesis: <\br>
    
3. **Knowing the Assumptions.** In this case, a t-test ![TFormula](images\TTtest.png) will be performed to test our hypotheses. There are different types of t-tests - one sample t-test, independent two sample t-test and paired two sample t-test. We are using **independent two sample t-test** because of the nature of our data. Our two samples draw values from *TWO* *INDEPENDENT* samples. 
But before we actually run the test, we have to make sure the following assumptions of the independent two sample t-test are met: 
    - [x] Independence: Well, you can either be a cat or a dog. Unless you're Muffin the dog-cat or Pico the cat-dog but let's assume that all our cats are only cats and all our dogs are only dogs. 
    - [ ] Normality: visually, a Q-Q plot helps check for normality - like in the following [examples](https://sherrytowers.com/2013/08/29/aml-610-fall-2013-module-ii-review-of-probability-distributions/qqplot_examples/) ![Examples of Q-Q plots](images\qqplot_examples.jpg)

And for N >= 100, Shapiro-Wilk test for normality. Keep in mind: ["The t-test is described as a robust test with respect to the assumption of normality. This means that some deviation away from normality does not have a large influence on Type I error rates. The exception to this is if the ratio of the smallest to largest group size is greater than 1.5 (largest compared to smallest)."](https://statistics.laerd.com/statistical-guides/independent-t-test-statistical-guide.php)

```{r}
# Visualize normality with a Q-Q plot 
data_frame(val = dog_sample) %>%
          ggplot(., aes(sample = val)) + 
                geom_qq_line() + 
                geom_qq()
data_frame(val = cat_sample) %>%
          ggplot(., aes(sample = val)) + 
                geom_qq_line() + 
                geom_qq()

#Running the Shapiro-Wilk test for normality
shapiro.test(dog_sample)
shapiro.test(cat_sample)
```
Report Normality - REMEMBER a p > .05 from the Shapiro-Wilk test means that our data are NOT significantly different from a normal distribution. 

What to do if your data isn't normally distributed? <\br>
- Transform Data
- Use the non-parametric [Mann-Whitney U Test](https://www.statisticssolutions.com/free-resources/directory-of-statistical-analyses/mann-whitney-u-test/) 
But as mentioned above, the t-test is robust to some deviation from normality. It is up to you us as researchers to decide how much deviation is acceptable.  
    - [ ] Homogeneity - equality of variances 
    Levene's Test of Equality of Variance - gives you a F statistic
     
```{r}
#because Levene's test was written for data frames, we will have to wrangle our two vectors into a data frame to get in the required format before running Levene's test 
data_frame <- as.data.frame(cbind(dog_sample, cat_sample))
data_frame <- pivot_longer(data_frame, everything(), names_to = "variable", values_to = "value")
leveneTest(value ~ variable, data_frame)

#NOTE: a lot of the plots and other tests we ran above can be redone in a more efficient and elegant way with our data_frame. Give it a try! 
```
    Report Homogeneity 
    We want our p-value to be > 0.05! - Our variances should NOT be statistically significantly different.
    What to do if our variances are not equal? <br>
    - Correction via the df - automatically done in the Welch's t-test by simply setting the var.equal parameter to FALSE in the t.test() function. 

```{r}
#The Independent two sample t-test 
t.test(dog_sample,cat_sample,var.equal = TRUE)

#The Welch's t-test
t.test(dog_sample,cat_sample,var.equal = FALSE)
```


4. **Performing Statistical Testing.** Based on the results of testing the assumptions, what t-test should we do? 
Do it here and report the results - [APA style!](https://www.socscistatistics.com/tutorials/ttest/default.aspx)

```{r}
#t-test
```



5. **Reporting Results and Statistical Inferences.** 

Before jumping to conclusions based on the results of these tests, it is our responsibility to understand what the p-value, confidence intervals and other metrics seen as the output of the t-test really mean and how we can draw conclusions and influences based on them. 

#### p-value  
[What is a p-value](https://www.youtube.com/watch?v=RVxHlsIw_Do) <br> 
[Understanding common misconceptions about p-values](http://daniellakens.blogspot.com/2017/12/understanding-common-misconceptions.html)
Here are some interactive visualizations to play around with in order to truly grasp what a p-value means: <br> 
* [Understanding p-values Through Simulations](https://rpsychologist.com/pvalue/)
* [Distribution of p-values when comparing two groups](https://rpsychologist.com/d3/pdist/)

Q7. Explain what a p-value is in your own words. 
Would you report a result as statistically significant is your p-value was 0.051? What about if it was 0.049? 

The next big issue: [p-hacking](https://www.youtube.com/watch?v=HDCOUXE3HMM)  
![p-hacking](images\phack.png)

Try your hand at some [p-hacking](https://projects.fivethirtyeight.com/p-hacking/)
One thing we can do to overcome this is practice [pre-registration](https://www.cos.io/initiatives/prereg) 

Q8. Would you pre-register a study? Why or why not?
Is that sufficient to curb p-hacking? 

#### Confidence Intervals
They give us more ... confidence? Read [this](https://s4be.cochrane.org/blog/2018/04/27/confidence-intervals-should-be-reported/) to get an idea of why they should be reported.  
[Here](https://nursing.ucalgary.ca/sites/default/files/teams/3/ExamplesusingAPAFormat.pdf) is an APA guide to reporting CIs (among other things).

Q9. Explain what a confidence interval is in your own words. 
Re-write your report of the t-test results but this time include the confidence interval. 


#### Statistical Inferences 

Segways into Simulations......


The goal of this course is get both an implementation and conceptual understanding of the statistical methods commonly used in Brain and Cognitive Sciences. The two main questions we should be able to answer for ourselves at the end are: <br>
Am I using the correct analysis for my data? <br>
Are the conclusions and inferences I am drawing from my analysis valid? <br>

3. How do you think changing the Null Hypothesis affects the tests conducted, reported results and inferences? (This can be moved to the bottom as a more conceptual question)

## Questions and Comments 
Below list three questions/comments you have for discussion in the first class based on what you have done above and the readings. At least two of the questions should be conceptual. If you have any syntax/code based doubts, do NOT include them here - ask on Slack. The questions you list here will be voted on along with questions from others and we will be discussing the most popular questions.  

1. <\br>
2. <\br>
3. <\br> 
